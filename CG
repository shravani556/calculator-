vm2:
    resource_group_key: "application"
    os_type: windows
    enabled: true
    keyvault_key: "servicekv1"
    create_sshkeys: false

    network_interfaces:
      nic1:
        vm_setting_key: "windows"
        vnet_key: "vnet_1_key"
        subnet_key: "app_subnet"
        primary: true
        naming_convention:
          name_mask: "a0001-vm-02-r-01-d-nic"
        enable_ip_forwarding: false
        accelerated_networking_enabled: false
        private_ip_address_allocation: "Dynamic"

    virtual_machine_settings:
      windows:
        naming_convention:
          name_mask: "a0001vm02r01d"
        size: "Standard_D8s_v3"
        encryption_at_host_enabled: false
        zone: "1"
        network_interface_keys: ["nic1"]

        os_disk:
          naming_convention:
            name_mask: "{name}"
            name: "a0001-vm-02-r-01-d-osdisk"
          caching: "ReadWrite"
          storage_account_type: "StandardSSD_LRS"
          disk_size_gb: 128
          disk_encryption_set_key: "cmk_des"

        identity:
          type: "SystemAssigned, UserAssigned"
          managed_identity_keys: ["uaimv"]

        source_image_reference:
          publisher: "MicrosoftWindowsServer"
          offer: "WindowsServer"
          sku: "2019-Datacenter-gensecond"
          version: "latest"

Resources


| where type =~ "microsoft.compute/virtualmachines"
| project name, location, resourceGroup, subscriptionId, properties.hardwareProfile.vmSize, properties.osProfile.computerName
Azure Resources Backup & DR Analysis - Complete Details

Resource Type Default Backup Retention Period Backup Frequency PITR Capable Azure Backup Available Other Backup Methods Geo-Replication DR Capable MSFT Documentation
API Management âŒ No N/A N/A âŒ No âŒ No ARM Template Export Configuration Backup Manual Snapshots âœ… Yes (Premium) âœ… Yes https://docs.microsoft.com/en-us/azure/api-management/api-management-howto-disaster-recovery-backup-restore
Application Insights âŒ No 90 days N/A âŒ No âŒ No Data Export to Storage Log Analytics Export Continuous Export âŒ No âŒ No https://docs.microsoft.com/en-us/azure/azure-monitor/logs/logs-data-export
App Services âœ… Yes Indefinite Automatic hourly âœ… Yes âœ… Yes Custom Backups to Storage ARM Templates Git Deployment âŒ No âœ… Yes https://docs.microsoft.com/en-us/azure/app-service/manage-backup
Event Grid Topics âŒ No Transient N/A âŒ No âŒ No Dead Letter Storage ARM Template Export Multiple Subscriptions âœ… Yes (Manual) âœ… Yes https://docs.microsoft.com/en-us/azure/event-grid/geo-disaster-recovery
Event Hubs Namespace âŒ No 1-7 days N/A âŒ No âŒ No Capture to Storage Geo-Recovery Multiple Consumers âœ… Yes (Manual) âœ… Yes https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-geo-dr
Log Analytics Workspace âŒ No 30-90 days N/A âŒ No âŒ No Data Export to Storage Archive Tier Linked Storage Accounts âŒ No âŒ No https://docs.microsoft.com/en-us/azure/azure-monitor/logs/logs-data-export
Managed Applications âŒ No N/A N/A âŒ No âŒ No ARM Template Export Publisher Backup Tools Custom Scripts âŒ No âŒ No https://docs.microsoft.com/en-us/azure/azure-resource-manager/managed-applications/overview
Synapse Workspace âš ï¸ Partial 7 days (SQL only) Automatic (SQL) âœ… Yes (SQL only) âŒ No Git Integration SQL Pool Restore Points Storage Account Backup âŒ No âŒ No https://docs.microsoft.com/en-us/azure/synapse-analytics/backup-restore/backup-restore
Storage Accounts âŒ No Configurable N/A âœ… Yes (with backup) âœ… Yes (Blobs) Soft Delete Versioning Immutable Blobs AzCopy âœ… Yes (Auto) âœ… Yes https://docs.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance

---

Additional Direct Links for Specific Features:

ğŸ› ï¸ Implementation Guides:

Â· App Service Backup: https://docs.microsoft.com/en-us/azure/app-service/manage-backup
Â· Event Hubs Capture: https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-capture-enable-through-portal
Â· Storage Backup: https://docs.microsoft.com/en-us/azure/backup/blob-backup-configure-manage
Â· Log Analytics Export: https://docs.microsoft.com/en-us/azure/azure-monitor/logs/logs-data-export?tabs=portal
Â· Synapse Git Integration: https://docs.microsoft.com/en-us/azure/synapse-analytics/cicd/continuous-integration-deployment

ğŸ“š General Azure Backup:

Â· Azure Backup Overview: https://docs.microsoft.com/en-us/azure/backup/backup-overview
Â· Disaster Recovery: https://docs.microsoft.com/en-us/azure/architecture/framework/resiliency/backup-and-recovery

All links are direct Microsoft documentation starting with HTTPS for easy access and verification.
Azure SQL Database Snapshots - Official Microsoft Documentation

ğŸ“š Official Microsoft Documentation Links:

1. Database Snapshots (SQL Server Feature):

https://docs.microsoft.com/en-us/sql/relational-databases/databases/database-snapshots-sql-server

This covers traditional SQL Server database snapshots (on-premises & SQL Server on VMs)

2. Azure SQL Database - Manual Backups (Equivalent to Snapshots):

https://docs.microsoft.com/en-us/azure/azure-sql/database/automated-backups-overview#manual-backups

3. Database Copy (Similar to Snapshot Functionality):

https://docs.microsoft.com/en-us/azure/azure-sql/database/database-copy

---

ğŸ” Azure SQL Database "Snapshot" Reality:

For Azure SQL Database:

Â· âŒ No traditional "snapshot" feature like VM snapshots
Â· âœ… Equivalent functionality through:
  Â· Database Copy (point-in-time copy)
  Â· Manual exports (bacpac files)
  Â· Point-in-Time Restore (PITR)

Available "Snapshot-like" Options:

Method Similar to Snapshot Retention Cost
Database Copy âœ… Yes Until deleted Additional database cost
Export to bacpac âœ… Yes Storage cost only Storage cost
PITR to new database âœ… Yes Until deleted Additional database cost

---

ğŸ”„ Snapshot vs Azure SQL Database Options:

Feature Traditional Snapshot Azure SQL Database Equivalent
Instant creation âœ… Yes âš ï¸ Fast (seconds to minutes)
Point-in-time âœ… Yes âœ… Yes (PITR)
Zero storage overhead âœ… Yes (differential) âŒ No (full copy)
Automated âœ… Yes âœ… Yes (PITR)
Manual on-demand âœ… Yes âœ… Yes (Database Copy)

---

ğŸ¯ How to Create "Snapshots" in Azure SQL Database:

Method 1: Database Copy (Recommended)

```sql
-- Creates an exact copy at current point in time
CREATE DATABASE database_copy AS COPY OF original_database;
```

Method 2: Export to bacpac

Â· Use Azure Portal â†’ Export feature
Â· Creates downloadable bacpac file
Â· Stores in Azure Storage

Method 3: Point-in-Time Restore

Â· Restore to any point within retention period
Â· Creates new database from backup

---

ğŸ“Š Snapshot Capability Summary:

Resource Type Snapshot Capable Snapshot Method Official Documentation
Azure SQL Database âš ï¸ Partial Database Copy, Export https://docs.microsoft.com/en-us/azure/azure-sql/database/database-copy
Virtual Machines âœ… Yes VM Snapshots https://docs.microsoft.com/en-us/azure/virtual-machines/snapshots
Storage Accounts âœ… Yes Blob Snapshots https://docs.microsoft.com/en-us/azure/storage/blobs/snapshots-overview
App Services âŒ No Manual Backups https://docs.microsoft.com/en-us/azure/app-service/manage-backup

---

ğŸš¨ Important Note:

"Azure SQL Database doesn't have traditional snapshots like VMs or storage. Instead, use Database Copy for immediate point-in-time copies or rely on the built-in PITR for recovery to any point within your retention period."

Your database a00003-arstaging-prd can use Database Copy for snapshot-like functionality, but it will incur additional costs for the copied database.


Here is a clean, professional email draft you can send to Bryan Caddy, copying Kash, exactly as your leads instructed.


---

Subject: Request for Confirmation â€“ Decommission or Region Migration for Sandbox Resources (West Central US)

Hi Bryan,

Hope you are doing well.

As part of the Jira task MSAZ-11454, I have reviewed the resources currently present in the Sandbox subscription under the West Central US region.
Below are the resources that are still active in this region:

Default Log Analytics Workspace

Network Watcher

Security Centerâ€“related solutions

SQL Advanced Threat Protection

SQL Vulnerability Assessment

Storage account (strguv01)

Other default security/monitoring components


All these resources are located in West Central US, and as per the analysis, there is no dependency to migrate them to another region, unless required by the subscription owner.

Before proceeding further, I would like to request your confirmation on one of the following actions:

1. Decommission these resources from the Sandbox environment
OR


2. Proceed with region migration to a standard region (if decommission is not approved)



Kindly confirm your preferred approach so we can proceed accordingly.
I have copied Kash for visibility.

Please let me know if you need any more details.

Thanks & Regards,
Sravani B


---

If you want, I can create another version that is shorter/more formal â€” just tell me!
